---
// Composant Hero pour les pages MDX avec image en background
interface Props {
  title: string;
  subtitle?: string;
  description?: string;
  heroImage?: string;
  category?: string;
  pubDate?: string;
  overlayOpacity?: number;
  minHeight?: string;
}

const {
  title,
  subtitle,
  description,
  heroImage,
  category,
  pubDate,
  overlayOpacity = 0.7,
  minHeight = '75vh'
} = Astro.props;
---

<section class="hero-markdown" style={`min-height: ${minHeight}`}>
  {heroImage && (
    <div class="hero-background-wrapper">
      <img
        src={heroImage}
        alt={title}
        class="hero-background-image"
      />
      <div class="hero-overlay" style={`opacity: ${overlayOpacity}`}></div>
    </div>
  )}

  <div class="hero-markdown-content">
    {category && (
      <span class="hero-category-badge">{category}</span>
    )}

    <h1 class="hero-markdown-title">{title}</h1>

    {subtitle && (
      <p class="hero-markdown-subtitle">{subtitle}</p>
    )}

    {description && (
      <p class="hero-markdown-description">{description}</p>
    )}

    {pubDate && (
      <div class="hero-markdown-meta">
        <div class="hero-meta-item">
          <span class="hero-meta-text">
            {new Date(pubDate).toLocaleDateString('fr-FR', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </span>
        </div>
      </div>
    )}
  </div>
</section>

<style lang="scss">
  @use '../../styles/abstracts/variables' as *;
  @use '../../styles/abstracts/mixins' as *;

  .hero-markdown {
    position: relative;
    color: $color-white;
    padding: 10rem 2rem 6rem 2rem;
    text-align: center;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 0;

    @include respond-to('md') {
      padding: 12rem 3rem 8rem 3rem;
    }

    @include respond-to('lg') {
      padding: 14rem 4rem 10rem 4rem;
    }
  }

  .hero-background-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
  }

  .hero-background-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
  }

  .hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      135deg,
      $color-primary-dark,
      $color-primary
    );
    z-index: 1;
  }

  .hero-markdown-content {
    max-width: $max-width-4xl;
    margin: 0 auto;
    position: relative;
    z-index: 2;
    width: 100%;
  }

  .hero-category-badge {
    display: inline-block;
    padding: $spacing-2 $spacing-4;
    margin-bottom: $spacing-4;
    background: rgba($color-accent, 0.3);
    border: 0.0625rem solid rgba($color-accent, 0.6);
    color: $color-white;
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-radius: $radius-full;
    backdrop-filter: blur(10px);
    @include transition(all);

    &:hover {
      background: rgba($color-accent, 0.5);
      border-color: $color-accent;
      transform: translateY(-0.125rem);
    }
  }

  .hero-markdown-title {
    font-family: $font-heading;
    font-size: 2.5rem;
    font-weight: $font-weight-bold;
    margin: 0 0 $spacing-4 0;
    background: linear-gradient(
      135deg,
      $color-white 0%,
      rgba($color-accent-light, 0.95) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.02em;
    line-height: $line-height-tight;

    @include respond-to('md') {
      font-size: 4rem;
    }

    @include respond-to('lg') {
      font-size: 5rem;
    }
  }

  .hero-markdown-subtitle {
    font-size: $font-size-xl;
    font-weight: $font-weight-normal;
    margin: 0 0 $spacing-6 0;
    color: rgba($color-accent-light, 0.95);
    font-style: italic;
    line-height: $line-height-normal;

    @include respond-to('md') {
      font-size: $font-size-2xl;
    }
  }

  .hero-markdown-description {
    font-size: $font-size-lg;
    line-height: $line-height-relaxed;
    margin: 0 0 $spacing-8 0;
    color: rgba($color-white, 0.95);
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;

    @include respond-to('md') {
      font-size: $font-size-xl;
    }
  }

  .hero-markdown-meta {
    display: flex;
    flex-wrap: wrap;
    gap: $spacing-4;
    align-items: center;
    justify-content: center;
    padding-top: $spacing-6;
    border-top: 0.0625rem solid rgba($color-white, 0.3);
    margin-top: $spacing-6;
  }

  .hero-meta-item {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    color: rgba($color-white, 0.9);
    font-size: $font-size-sm;

    @include respond-to('md') {
      font-size: $font-size-base;
    }
  }

  .hero-meta-text {
    font-weight: $font-weight-medium;
  }
</style>
